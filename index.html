<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>电力监控系统</title>
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/navigation.css">
	<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>





<body class="bodyy">

<nav class="navbar-default" role="navigation">
	<div class="container-fluid"> 
	<div class="navbar-header">
		<button type="button" class="navbar-toggle" data-toggle="collapse"
				data-target="#example-navbar-collapse">
			<span class="sr-only">切换导航</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="#">电力监控系统</a>
	</div>
	<div class="collapse navbar-collapse" id="example-navbar-collapse">
		<ul class="nav navbar-nav">
            <li><a>    </a></li>
            <li class="active"><a href="index.html">电力监控</a></li>
            <li><a>    </a></li>
            <li><a href="count.html">统计分析</a></li>
            <li><a>    </a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown">
					用户 <b class="caret"></b>
				</a>
				<ul class="dropdown-menu">
					<li><a href="#">登录</a></li>
					<li class="divider"></li>
					<li><a href="#">注销</a></li>
				</ul>
			</li>
		</ul>
	</div>
	</div>
</nav>


<p class="wenzi">电力实时监控</p><br>


<div class="table-responsive" align="center">
<table class="table table-hover  table-striped">
  <thead>
    <tr>
      <th>序号</th>
      <th>相数</th>
      <th>电压有效值(v)</th>
      <th>电流有效值(A)</th>
      <th>有功功率(w)</th>
      <th>无功功率(w)</th>
      <th>视在功率(w)</th>
      <th>功率因数</th>
      <th>测量频率(hz)</th>
      <th>时间</th>
    </tr>
  </thead>
  <tbody id = "mainbody">
    <td id = "voltage1B">220</td>
  </tbody>
</table>
</div>

<ul class="pagination" >
        <li><a href="#">&laquo;</a></li>
        <li><a href="#">1</a></li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">5</a></li>
        <li><a href="#">&raquo;</a></li>
</ul>
</body>

<script>
        var creat = 0;
        
        window.onload = main();

        function main(){
            return_date = request_date("page","1");
            create_element(return_date);
            fill_date(return_date);
        }
        
        function request_date(type,detail)
        {
            var data = {
                array:[
                {
                'node':[
                  {
                    'voltage':'221' , 'electricity':'1.87' , 'effective':'410' ,  'reactive':'41.1' , 'apparent':'411.4' , 'factor':'0.89' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  },
                  {
                    'voltage':'220' , 'electricity':'1.99' , 'effective':'435' ,  'reactive':'43.7' , 'apparent':'437.8' , 'factor':'0.86' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  },
                  {
                    'voltage':'220' , 'electricity':'1.87' , 'effective':'411' ,  'reactive':'41.3' , 'apparent':'413.27' , 'factor':'0.92' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  }
                 ]
                },
                
                {
                'node':[
                  {
                    'voltage':'222' , 'electricity':'1.87' , 'effective':'410' ,  'reactive':'41.1' , 'apparent':'411.4' , 'factor':'0.89' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  },
                  {
                    'voltage':'220' , 'electricity':'1.99' , 'effective':'435' ,  'reactive':'43.7' , 'apparent':'437.8' , 'factor':'0.86' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  },
                  {
                    'voltage':'221' , 'electricity':'1.87' , 'effective':'411' ,  'reactive':'41.3' , 'apparent':'413.27' , 'factor':'0.92' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  }
                 ]
                },

                {
                'node':[
                  {
                    'voltage':'223' , 'electricity':'1.87' , 'effective':'410' ,  'reactive':'41.1' , 'apparent':'411.4' , 'factor':'0.89' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  },
                  {
                    'voltage':'220' , 'electricity':'1.99' , 'effective':'435' ,  'reactive':'43.7' , 'apparent':'437.8' , 'factor':'0.86' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  },
                  {
                    'voltage':'221' , 'electricity':'1.87' , 'effective':'411' ,  'reactive':'41.3' , 'apparent':'413.27' , 'factor':'0.92' , 'hz':'50' , 'time':'2018-5-24 11:11' 
                  }
                 ]
                }
            ]
              }
         /*   
         $.ajax({
                type:"post",
                url:"getdata.py",
                data:"type="+type+"detail"+detail,
                success:create_element(1)
            })
        */
        return data
        }
        
        function create_element(return_date)
        {
            if(creat == 0)
            {
                var creat_tr = '';
                for (node=1 ; node<4 ; node++){
                    creat_tr = creat_tr+ "<tr>";
                    creat_tr = creat_tr+ "<td id = \"id"+node+"\">"+node+"</td>";
                    creat_tr = creat_tr+"<td>A</td>";
                    creat_tr = creat_tr+"<td id = \"voltage"+node+"A\">220</td>";
                    creat_tr = creat_tr+"<td id = \"electricity"+node+"A\">1.87</td>";
                    creat_tr = creat_tr+"<td id = \"effective"+node+"A\">410</td>";
                    creat_tr = creat_tr+"<td id = \"reactive"+node+"A\">41.1</td>";
                    creat_tr = creat_tr+"<td id = \"apparent"+node+"A\">411.4</td>";
                    creat_tr = creat_tr+"<td id = \"factor"+node+"A\">0.89</td>";
                    creat_tr = creat_tr+"<td id = \"hz"+node+"A\">50</td>";
                    creat_tr = creat_tr + "<td id = \"time" + node + "A\">2018-5-24 11:11</td>";
                    creat_tr = creat_tr + "</tr>";
        
                    creat_tr = creat_tr + "<tr>";
                    creat_tr = creat_tr+ "<td></td>";
                    creat_tr = creat_tr + "<td>B</td>";
                    creat_tr = creat_tr + "<td id = \"voltage" + node + "B\">220</td>";
                    creat_tr = creat_tr + "<td id = \"electricity" + node + "B\">1.87</td>";
                    creat_tr = creat_tr + "<td id = \"effective" + node + "B\">410</td>";
                    creat_tr = creat_tr + "<td id = \"reactive" + node + "B\">41.1</td>";
                    creat_tr = creat_tr + "<td id = \"apparent" + node + "B\">411.4</td>";
                    creat_tr = creat_tr + "<td id = \"factor" + node + "B\">0.89</td>";
                    creat_tr = creat_tr + "<td id = \"hz" + node + "B\">50</td>";
                    creat_tr = creat_tr + "<td id = \"time" + node + "B\">2018-5-24 11:11</td>";
                    creat_tr = creat_tr+"</tr>";
        
                    creat_tr = creat_tr + "<tr>";
                    creat_tr = creat_tr+ "<td></td>";
                    creat_tr = creat_tr + "<td>C</td>";
                    creat_tr = creat_tr + "<td id = \"voltage" + node + "C\">220</td>";
                    creat_tr = creat_tr + "<td id = \"electricity" + node + "C\">1.87</td>";
                    creat_tr = creat_tr + "<td id = \"effective" + node + "C\">410</td>";
                    creat_tr = creat_tr + "<td id = \"reactive" + node + "C\">41.1</td>";
                    creat_tr = creat_tr + "<td id = \"apparent" + node + "C\">411.4</td>";
                    creat_tr = creat_tr + "<td id = \"factor" + node + "C\">0.89</td>";
                    creat_tr = creat_tr + "<td id = \"hz" + node + "C\">50</td>";
                    creat_tr = creat_tr + "<td id = \"time" + node + "C\">2018-5-24 11:11</td>";
                    creat_tr = creat_tr + "</tr>";
                }
                $("#mainbody").html(creat_tr);
        //        document.getElementById("mainbody").innerHTML=creat_tr
                creat = 1
                return
            }
            else if(creat == 1)
            {
                return
            }
        }
        
        function fill_date(return_date)
        {   
            // i 根据节点的服务器返回节点的数量，解析并填入数据
            for(i in return_date.array){
                //节点编号从1开始，所以需要+1
                node_number = parseInt(i)
                node_number = node_number+1
                // j 每个节点三相 jj将三相转换为字符以便获取id
                for(j in return_date.array[i].node){
                    jj = ["A","B","C"]
                    var argument = ["voltage","electricity","effective","reactive","apparent","factor","hz","time"]
                    //根据参数数量，填入数据，依次填入一个节点的一个相数的所有数据
                    for(var argument_number in argument){
                      $("#"+argument[argument_number]+node_number+jj[j]).html(return_date.array[i].node[j][argument[argument_number]])
                    }
                }
            }
//            alert(return_date.array.length)
//            $("voltage"+node+"A").html = return_date.node_number[node].voltage
        }
        
        function send_request(commond)
        {
            
        }
        </script>

</html>